(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{387:function(s,a,t){"use strict";t.r(a);var n=t(45),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件"}},[s._v("#")]),s._v(" 插件")]),s._v(" "),t("h2",{attrs:{id:"为什么使用插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为什么使用插件"}},[s._v("#")]),s._v(" 为什么使用插件?")]),s._v(" "),t("ul",[t("li",[s._v("去耦合")])]),s._v(" "),t("p",[s._v("解耦后的插件虽然在安装的时候会有些繁琐，但更容易升级、个性化定制")]),s._v(" "),t("ul",[t("li",[s._v("通用性")])]),s._v(" "),t("p",[s._v("插件将尽可能的往通用性设计，即插件的设计不会只针对商城")]),s._v(" "),t("h2",{attrs:{id:"常见问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[s._v("#")]),s._v(" 常见问题")]),s._v(" "),t("ul",[t("li",[s._v("为什么不采用自动化部署？")])]),s._v(" "),t("p",[s._v("自动化必然存在高耦合，可维护性差的问题，不利于项目发展")]),s._v(" "),t("ul",[t("li",[s._v("插件是否收费？")])]),s._v(" "),t("p",[s._v("插件是否收费由插件开发者决定，一般可直接下载的均可免费使用")]),s._v(" "),t("ul",[t("li",[s._v("为什么我的观察者没有被执行？")])]),s._v(" "),t("p",[s._v("请确保正确配置了"),t("code",[s._v("$route")]),s._v("，只有存在于"),t("code",[s._v("$route")]),s._v("的路由，才会执行当前的观察者；还有一种可能就是你的监听并不是http请求，而是控制器触发（调度任务），那么你需要在判断中加入控制器的判断代码，参考下面的示例代码。")]),s._v(" "),t("ul",[t("li",[s._v("为什么我的观察者被执行了多次？")])]),s._v(" "),t("p",[s._v("往往被执行多次是因为你并没有做到很好的约束，请加大限制条件，确保只在需要执行的步骤中触发。")]),s._v(" "),t("ul",[t("li",[s._v("插件开发哪些文件在保存时会被重新生成？")])]),s._v(" "),t("h2",{attrs:{id:"观察者模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#观察者模式"}},[s._v("#")]),s._v(" 观察者模式")]),s._v(" "),t("blockquote",[t("p",[s._v("如果你的插件需要基于其它业务代码或其它插件，那观察者模式是必不可少的，以下会详细介绍如何在插件中使用观察者模式。\n观察者模型并不提高代码执行效率，反而会有所降低，但它的好处是解耦，提高项目的可扩展可维护性，对于项目的迭代来说是一种很好的解决方案。")])]),s._v(" "),t("ul",[t("li",[s._v("观察者和模型的关系是多对一，即一个模型可以有多个观察者")]),s._v(" "),t("li",[s._v("只有使用模型的save时，观察者才会生效")])]),s._v(" "),t("h3",{attrs:{id:"创建观察者"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建观察者"}},[s._v("#")]),s._v(" 创建观察者")]),s._v(" "),t("ul",[t("li",[s._v("首先在"),t("code",[s._v("app/Observers")]),s._v("目录下创建观察者，一般先创建一个目录，目录名根据取模型名，如"),t("code",[s._v("GoodIndent")]),s._v("，再创建一个"),t("code",[s._v("Observers")]),s._v("，命名以实际功能命名，如"),t("code",[s._v("IndentFailureStockProcessingObserver")]),s._v("，这个观察者的作用是订单失效库存操作")]),s._v(" "),t("li",[s._v("其次就是在"),t("code",[s._v("Providers/AppServiceProvider.php")]),s._v("的"),t("code",[s._v("boot")]),s._v("方法中，将定义的观察者添加进来，如")])]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("boot")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("App"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Models"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("v1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("GoodIndent")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("observe")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("App"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Observers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("GoodIndent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("IndentFailureStockProcessingObserver")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"什么时候下需要使用观察者模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么时候下需要使用观察者模式"}},[s._v("#")]),s._v(" 什么时候下需要使用观察者模式")]),s._v(" "),t("ul",[t("li",[s._v("当你的代码存在耦合性的时候，就可以将耦合代码拆分成观察者模式")]),s._v(" "),t("li",[s._v("当你的插件需要修改项目源代码时，可以使用观察者模式，这样可以确保项目更新后不会引响到自己添加的代码")])]),s._v(" "),t("h3",{attrs:{id:"示例代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例代码"}},[s._v("#")]),s._v(" 示例代码")]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token php language-php"}},[t("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("namespace")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[s._v("App"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Observers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("GoodIndent")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[s._v("App"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Models"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("v1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Dhl")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[s._v("App"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Models"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("v1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("GoodIndent")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[s._v("App"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Models"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("v1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("User")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[s._v("App"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Notifications"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("InvoicePaid")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[s._v("Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Http"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Request")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * finish payment\n * 发货通知\n * Class ShipmentNotificationObserver\n * @package App\\Observers\\GoodIndent\n */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ShipmentNotificationObserver")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("protected")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这里配置需要执行该观察者的路由")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("protected")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$route")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'admin/indent/shipment'")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 是否执行观察者，默认为不执行，只有路由存在于$route时才会触发,并且在非http请求时不会触发")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("protected")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$execute")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("__construct")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[s._v("Request")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("runningInConsole")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$this")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("request")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$path")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("explode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"admin"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            \n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'admin'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// $name = 'admin' . preg_replace(\"/\\/\\\\d+/\",'', $path[1]);")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$path")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("explode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"app"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'app'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//$name = 'app' . preg_replace(\"/\\/\\\\d+/\",'', $path[1]);")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("collect")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$this")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("route")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("contains")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$this")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("execute")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("updated")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[s._v("GoodIndent")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$goodIndent")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 当通过http请求，并存在于$route配置的路由时才触发,或是控制器触发(Console)")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$this")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("execute")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("runningInConsole")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$goodIndent")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("state")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name static-context"}},[s._v("GoodIndent")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GOOD_INDENT_STATE_TAKE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            \n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br")])]),t("h2",{attrs:{id:"插件使用说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件使用说明"}},[s._v("#")]),s._v(" 插件使用说明")]),s._v(" "),t("ul",[t("li",[s._v("Dsshop v1.1.0开始支持插件")]),s._v(" "),t("li",[s._v("插件以独立项目发布，由独立个体维护（前期为Dsshop开发者发布和维护）")])]),s._v(" "),t("h2",{attrs:{id:"结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#结构"}},[s._v("#")]),s._v(" 结构")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v(".\n├── list    //插件\n│   ├── coupon\n│   │   ├── admin //后台资源\n│   │   │   ├── api  //后台api\n│   │   │   └── views    //后台模板\n│   │   ├── api //API资源\n│   │   │   ├── config  //配置资源\n│   │   │   ├── console //任务调度资源\n│   │   │   ├── models  //模型资源\n│   │   │   ├── observers  //观察者资源\n│   │   │   ├── plugin  //插件资源\n│   │   │   │   ├── admin //后台API\n│   │   │   │   ├── client //客户端API\n│   │   │   └── requests    //表单验证资源\n│   │   ├── database    //数据表资源\n│   │   ├── client  //客户端\n│   │   │   ├── nuxt-web  //网站\n│   │   │   └── uni-app   //app\n│   │   ├── dsshop.json //插件配置\n│   │   ├── routes.json //路由配置\n├── template    //插件生成文件所需的模板\n└── dsshop.json    //本地插件配置\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("h3",{attrs:{id:"dsshop-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dsshop-json"}},[s._v("#")]),s._v(" "),t("code",[s._v("dsshop.json")])]),s._v(" "),t("ul",[t("li",[s._v("本地安装的插件列表，用于管理本地插件的安装和更新，格式为")])]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('[\n  {\n    "name": "coupon", // 插件包名\n    "versions": "",  //插件版本\n    "is_delete": "",  //是否卸载\n    "time":""  //插件安装时间\n  }\n  ...\n]\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"coupon"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#coupon"}},[s._v("#")]),s._v(" "),t("code",[s._v("coupon")])]),s._v(" "),t("ul",[t("li",[s._v("这里以优惠券插件为例，如果你创建的插件，可以自己命名")])]),s._v(" "),t("h4",{attrs:{id:"coupon-dmin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#coupon-dmin"}},[s._v("#")]),s._v(" "),t("code",[s._v("coupon/dmin")])]),s._v(" "),t("ul",[t("li",[s._v("插件后台资源，包含 "),t("code",[s._v("api")]),s._v(" "),t("code",[s._v("views")])])]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v("api //后台的api配置\nviews //后台的模板\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"coupon-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#coupon-api"}},[s._v("#")]),s._v(" "),t("code",[s._v("coupon/api")])]),s._v(" "),t("ul",[t("li",[s._v("插件API相关资源，也就是php相关资源，包含以下目录，目录下可为空")])]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v("config //配置文件，如果有配置相关的，推荐添加以插件名称命名的配置文件，对应的路径 "),t("span",{pre:!0,attrs:{class:"token code keyword"}},[s._v("`api/config`")]),s._v("\nconsole //定时任务相关（需要LINUX支持），对应的路径 "),t("span",{pre:!0,attrs:{class:"token code keyword"}},[s._v("`api/app/Console`")]),s._v("\nmodels  //模型相关资源，对应的路径 "),t("span",{pre:!0,attrs:{class:"token code keyword"}},[s._v("`api/app/Models/v1`")]),s._v("\nplugin  //插件相关控制器，对应的路径 "),t("span",{pre:!0,attrs:{class:"token code keyword"}},[s._v("`api/app/Http/Controllers/v1/Plugin`")]),s._v("\nrequests //表单验证相关控制器,对应的路径 "),t("span",{pre:!0,attrs:{class:"token code keyword"}},[s._v("`api/app/Http/Requests/v1`")]),s._v("\nobservers //观察者相关代码，对应的路径 "),t("span",{pre:!0,attrs:{class:"token code keyword"}},[s._v("`api/app/Observers`")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h4",{attrs:{id:"coupon-database"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#coupon-database"}},[s._v("#")]),s._v(" "),t("code",[s._v("coupon/database")])]),s._v(" "),t("ul",[t("li",[s._v("数据迁移资源，和插件相关的数据表都会以迁移文件形式存在，需要在终端运行")])]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v("php artisan migrate\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"coupon-uniapp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#coupon-uniapp"}},[s._v("#")]),s._v(" "),t("code",[s._v("coupon/uniApp")])]),s._v(" "),t("ul",[t("li",[s._v("uni-app相关资源，该目录下分 "),t("code",[s._v("api")]),s._v(" "),t("code",[s._v("components")]),s._v(" "),t("code",[s._v("pages")]),s._v("三个目录，没有的目录下可为空")])]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v("api //插件和后端通信所需的API文件\ncomponents  //插件在uni-app下的组件（插件必须以组件的形式存在于uni-app，可以理解为vue下的插件）\npages //插件对应的模板\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"coupon-dsshop-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#coupon-dsshop-json"}},[s._v("#")]),s._v(" "),t("code",[s._v("coupon/dsshop.json")])]),s._v(" "),t("ul",[t("li",[s._v("这里的dsshop.json是 "),t("code",[s._v("coupon")]),s._v("插件目录下的配置文件")])]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('{\n   "name": "优惠券",  //插件名称\n   "abbreviation": "coupon",  //插件缩写\n   "describe": "支持创建满减、随机、折扣优惠券",  //插件描述\n   "download": "",  //插件下载地址\n   "url": "",  //插件地址\n   "versions": "0.0.1", //插件版本\n   "author": "", //插件作者\n   "instructions": "", //插件说明，将在下载时自动生成README.md\n   "local": 1, //是否本地环境，自己创建的插件会为1\n   "publish": 1, //是否已发布，发布后的插件可以安装和卸载\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h4",{attrs:{id:"coupon-routes-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#coupon-routes-json"}},[s._v("#")]),s._v(" "),t("code",[s._v("coupon/routes.json")])]),s._v(" "),t("ul",[t("li",[s._v("路由配置文件，该文件保存了后台、API、app所有涉及到路由配置的地方，格式参考如下")])]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"admin"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 后台API路由，将会自动添加到 api/routes/api.php里面")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"permission"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//后台模板路由，将会自动添加到 admin/src/store/permission.js里面")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"app"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" "')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// APP路由，将会自动添加到 api/routes/api.php里面，这里是需要用户登录权限验证的")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"notValidatedApp"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" "')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// APP路由，将会自动添加到 api/routes/api.php里面，这里是不需要验证用户登录状态的")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"observers"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//观察者路由，将会自动添加到 api/app/Providers/AppServiceProvider的boot里面")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"wechatChannel"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//微信公众号模板消息 api/app/Channels/WechatChannel.php")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"routeLangAdmin"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//路由语言包，用于插件获取后台路由所用 api/resources/lang/zn/route.php")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"routeLangClient"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//路由语言包，用于插件获取app路由所用 api/resources/lang/zn/route.php")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"relevance"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//关联的文件")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"clientTemplate"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//关联的客户端模板列表")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"adminTemplate"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//关联的后台模板列表")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"packagingJurisdiction"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//权限列表")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"db"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//生成的数据列表")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h2",{attrs:{id:"插件开发模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件开发模式"}},[s._v("#")]),s._v(" 插件开发模式")]),s._v(" "),t("ul",[t("li",[s._v("默认每个插件的"),t("code",[s._v("publish")]),s._v("分支为插件的开发模式下的代码，如果插件是开源的，都应该提供该分支")]),s._v(" "),t("li",[s._v("开发模式下，需要先进行编辑，然后将每个表的“是否重置”勾选，再将“重置路由”勾选，保存后项目将自动添加插件相关文件，通过发行后，自动将插件代码抽离出项目放到插件对应的目录下，再点下载，将插件部分文件打包出来")]),s._v(" "),t("li",[s._v("只有在开发模式下允许进行插件的个性化修改，修改后，请根据上面一步有选择性的对修改后的表或文件进行重置操作")]),s._v(" "),t("li",[s._v("使用别人的开发模式代码，请不要使用第二步操作，可进行一次插件安装，然后将开发模式下的"),t("code",[s._v("dsshop.json")]),s._v("替换，即会自动切换到开发模式")])]),s._v(" "),t("h2",{attrs:{id:"插件开发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件开发"}},[s._v("#")]),s._v(" 插件开发")]),s._v(" "),t("ul",[t("li",[s._v("首先请确保你已经了解插件的结构")]),s._v(" "),t("li",[s._v("你想开发的插件是无耦合的，且可扩展的")]),s._v(" "),t("li",[s._v("插件开发中，如果添加了其它文件，可添加到相关文件")]),s._v(" "),t("li",[s._v("插件升级不建议针对之前版本的文件有删除操作，如果涉及到数据表的修改，请用迁移文件的形式进行处理")])]),s._v(" "),t("h3",{attrs:{id:"第一步"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一步"}},[s._v("#")]),s._v(" 第一步")]),s._v(" "),t("ul",[t("li",[s._v("根据自己的想法，开发功能模块，包括且不限于：模型、控制器、验证器、后台模板、uni-app模板、uni-app组件等等")])]),s._v(" "),t("h3",{attrs:{id:"第二步-解耦"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二步-解耦"}},[s._v("#")]),s._v(" 第二步：解耦")]),s._v(" "),t("ul",[t("li",[s._v("解耦就是将一些和插件有关的代码分离出来，并根据插件开发的结构进行归类（如果是在原有项目添加的代码不需要分离，请先保留）")])]),s._v(" "),t("h3",{attrs:{id:"第三步-数据迁移"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第三步-数据迁移"}},[s._v("#")]),s._v(" 第三步：数据迁移")]),s._v(" "),t("ul",[t("li",[s._v("将数据表转为数据迁移代码，如是基于原有表的，也需要转为数据迁移代码")])]),s._v(" "),t("h3",{attrs:{id:"第四步-提取权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第四步-提取权限"}},[s._v("#")]),s._v(" 第四步：提取权限")]),s._v(" "),t("ul",[t("li",[s._v("将插件相关的权限按下表进行填写")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("权限名称")]),s._v(" "),t("th",[s._v("API")]),s._v(" "),t("th",[s._v("分组")]),s._v(" "),t("th",[s._v("菜单图标")]),s._v(" "),t("th",[s._v("显示在菜单栏")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("优惠券")]),s._v(" "),t("td",[s._v("Coupon")]),s._v(" "),t("td",[s._v("工具")]),s._v(" "),t("td",[s._v("否")]),s._v(" "),t("td",[s._v("是")])])])]),s._v(" "),t("h3",{attrs:{id:"第五步-编写示例代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第五步-编写示例代码"}},[s._v("#")]),s._v(" 第五步：编写示例代码")]),s._v(" "),t("ul",[t("li",[s._v("编写示例代码，为了利于维护，可直接截图标注，不要提供耦合示例代码")])]),s._v(" "),t("h3",{attrs:{id:"第六步-编写插件安装json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第六步-编写插件安装json"}},[s._v("#")]),s._v(" 第六步：编写插件安装json")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('{\n   "name": "优惠券",  //插件名称\n   "abbreviation": "coupon",  //插件缩写\n   "describe": "支持创建满减、随机、折扣优惠券",  //插件描述\n   "download": "",  //插件下载地址\n   "url": "",  //插件地址\n   "versions": "0.0.1", //插件版本\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"第七步-测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第七步-测试"}},[s._v("#")]),s._v(" 第七步：测试")]),s._v(" "),t("ul",[t("li",[s._v("下载最新版本的dsshop，根据插件安装流程，安装自己的插件，看最终是否可以正常安装、使用和卸载")])])])}),[],!1,null,null,null);a.default=e.exports}}]);