(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{364:function(s,a,e){"use strict";e.r(a);var n=e(42),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"常见问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[s._v("#")]),s._v(" 常见问题")]),s._v(" "),e("h3",{attrs:{id:"composer-install安装出错"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#composer-install安装出错"}},[s._v("#")]),s._v(" composer install安装出错")]),s._v(" "),e("ul",[e("li",[s._v("可以通过composer update修复，也可直接将composer.lock删除，然后再执行"),e("code",[s._v("composer install")])])]),s._v(" "),e("h3",{attrs:{id:"client-error-post-http-127-1-1-oauth-token-resulted-in-a-401-unauthorized-response-error-invalid-client-message-client-authentication-failed"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#client-error-post-http-127-1-1-oauth-token-resulted-in-a-401-unauthorized-response-error-invalid-client-message-client-authentication-failed"}},[s._v("#")]),s._v(' Client error: POST http://127.1.1/oauth/token resulted in a 401 Unauthorized response: {"error":"invalid_client","message":"Client authentication failed"}')]),s._v(" "),e("ul",[e("li",[s._v("以上错误推测因为生成oauth密钥过早造成，故新的文档最后才生成该密钥")]),s._v(" "),e("li",[s._v("解决办法就是先删除已经生成的"),e("code",[s._v("oauth-private.key")]),s._v("和"),e("code",[s._v("oauth-public.key")]),s._v("，然后再重新执行"),e("code",[s._v("php artisan passport:keys")])])]),s._v(" "),e("h3",{attrs:{id:"curl-7-failed-to-connect-to-xxx-port-80-connection-refused"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#curl-7-failed-to-connect-to-xxx-port-80-connection-refused"}},[s._v("#")]),s._v(" [curl] 7: Failed to connect to xxx port 80: Connection refused")]),s._v(" "),e("ul",[e("li",[s._v("由于laradock没有正确配置造成的错误")]),s._v(" "),e("li",[s._v("需要修改docker-compose.yml的NGINX Server中的networks部分，如下代码，在"),e("code",[s._v("aliases")]),s._v("和"),e("code",[s._v("aliases")]),s._v("添加自己的域名，如下"),e("code",[s._v("dsshop.text")])])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### NGINX Server ##################################")]),s._v("\n\n    nginx:\n      build:\n        context: ./nginx\n        args:\n          - "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PHP_UPSTREAM_CONTAINER")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${NGINX_PHP_UPSTREAM_CONTAINER}")]),s._v("\n          - "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PHP_UPSTREAM_PORT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${NGINX_PHP_UPSTREAM_PORT}")]),s._v("\n      volumes_from:\n        - applications\n      volumes:\n        - "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${NGINX_HOST_LOG_PATH}")]),s._v(":/var/log/nginx\n        - "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${NGINX_SITES_PATH}")]),s._v(":/etc/nginx/sites-available\n      ports:\n        - "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${NGINX_HOST_HTTP_PORT}")]),s._v(':80"')]),s._v("\n        - "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${NGINX_HOST_HTTPS_PORT}")]),s._v(':443"')]),s._v("\n      depends_on:\n        - php-fpm\n      networks:\n        frontend:\n         aliases:\n          - dsshop.text\n        backend:\n         aliases:\n          - dsshop.text\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br")])]),e("h3",{attrs:{id:"商品搜一个字为什么无法查询出来"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#商品搜一个字为什么无法查询出来"}},[s._v("#")]),s._v(" 商品搜一个字为什么无法查询出来？")]),s._v(" "),e("ul",[e("li",[s._v("商品搜索采用mysql的全文搜索功能，默认需要2个字，如果需要支持1个字，需要修改mysql.conf中的"),e("code",[s._v("ngram_token_size=1")])]),s._v(" "),e("li",[s._v("具体可以查看"),e("a",{attrs:{href:"https://github.com/dspurl/dsshop/pull/74",title:"模糊搜索改为全文搜索",target:"_blank",rel:"noopener noreferrer"}},[s._v("模糊搜索改为全文搜索"),e("OutboundLink")],1)])]),s._v(" "),e("h3",{attrs:{id:"laradock备份报backup-failed-because-the-dump-process-failed-with-exitcode-127-command-not-found-sh-1-mysqldump-not-found"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#laradock备份报backup-failed-because-the-dump-process-failed-with-exitcode-127-command-not-found-sh-1-mysqldump-not-found"}},[s._v("#")]),s._v(" laradock备份报"),e("code",[s._v("Backup failed because The dump process failed with exitcode 127 : Command not found : sh: 1: mysqldump: not found")])]),s._v(" "),e("ul",[e("li",[s._v("打开你的"),e("code",[s._v("workspace/Dockerfile")]),s._v("最后一行添加以下代码")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#--------------------------------------------------------------------------")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysql-client")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#--------------------------------------------------------------------------")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" root\n\nRUN "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y mysql-client\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("ul",[e("li",[s._v("然后执行以下代码")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker-compose down\ndocker-compose build workspace\ndocker-compose up -d redis nginx mysql\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);