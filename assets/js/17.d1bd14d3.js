(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{376:function(a,s,e){"use strict";e.r(s);var t=e(45),r=Object(t.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[a._v("#")]),a._v(" 部署")]),a._v(" "),e("h2",{attrs:{id:"环境搭建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境搭建"}},[a._v("#")]),a._v(" 环境搭建")]),a._v(" "),e("h2",{attrs:{id:"rset-api部署-laravel"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rset-api部署-laravel"}},[a._v("#")]),a._v(" RSET API部署(laravel)")]),a._v(" "),e("ul",[e("li",[a._v("参考 "),e("a",{attrs:{href:"https://learnku.com/docs/laravel/7.x/deployment/7452",title:"Laravel部署",target:"_blank",rel:"noopener noreferrer"}},[a._v("Laravel部署"),e("OutboundLink")],1)])]),a._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("php artisan storage:link\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("composer")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\nphp artisan view:cache\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("h3",{attrs:{id:"配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[a._v("#")]),a._v(" 配置")]),a._v(" "),e("ul",[e("li",[a._v("以下配置不修改不引响正常使用，修改后可提高网站安全性")])]),a._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("PROJECT_KEY "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#配置前端密钥，可通过php artisan key:generate生成机制生成密钥，也可以自定义")]),a._v("\nAPP_KEY "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#重置APP_KEY密钥")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h3",{attrs:{id:"资源路径迁移"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#资源路径迁移"}},[a._v("#")]),a._v(" 资源路径迁移")]),a._v(" "),e("ul",[e("li",[a._v("如果需要将本地的资源路径一键替换成线上路径的话，请执行以下代码")])]),a._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("php artisan resource:migration\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h3",{attrs:{id:"定时任务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#定时任务"}},[a._v("#")]),a._v(" 定时任务")]),a._v(" "),e("ul",[e("li",[a._v("定时任务涉及linux(这里拿宝塔为例)和laravel")]),a._v(" "),e("li",[a._v("进入宝塔-计划任务-添加计划任务，按下图配置\n"),e("img",{attrs:{src:"/image/14.png",alt:""}})])]),a._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("/www/server/php/72/bin/php /www/wwwroot/项目目录/artisan schedule:run "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v(" /dev/null "),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("ul",[e("li",[a._v("然后就不用去管了，以后有什么定时任务，直接在 "),e("code",[a._v("api/app/Console/Kernel.php")]),a._v("添加即可，更多参考: "),e("a",{attrs:{href:"https://learnku.com/docs/laravel/7.x/scheduling/7492",title:"任务调度",target:"_blank",rel:"noopener noreferrer"}},[a._v("任务调度"),e("OutboundLink")],1)])]),a._v(" "),e("h2",{attrs:{id:"后台搭建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#后台搭建"}},[a._v("#")]),a._v(" 后台搭建")]),a._v(" "),e("ul",[e("li",[a._v("进入admin目录，执行以下代码")])]),a._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 打包正式环境")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run build:prod\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("ul",[e("li",[a._v("如果需要打包到指定目录下，如h5")])]),a._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# admin/config/index.js")]),a._v("\nassetsPublicPath: "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'/h5/'")]),a._v(",\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("ul",[e("li",[a._v("然后将打包好生成的文件上传到服务器，也可以发给别人直接访问（需要对方有本地环境，双击访问index.html无效）")])])])}),[],!1,null,null,null);s.default=r.exports}}]);